<!DOCTYPE html>
<html>
<head>
	<title>风车html制作</title>
</head>
<body>
	<canvas id="myCanvas" width=600 height=600>
	</canvas>
	<script type="text/javascript" src='WheelGradient.js'></script>
	<script type="text/javascript">

		var canvas = document.getElementById('myCanvas');
		var width = canvas.width;
		var height = canvas.height;
		var ctx = canvas.getContext('2d');
		canvas.addEventListener("mousedown", doMouseDown, false);

		function drawWDthellGradient(wheelGradient,center){
			setInterval(function () {
		     	ctx.clearRect(center.x-100, center.y-100, 200, 200);
		     for (var i = 0; i < WheelGradient.options.num; i += 1) {
		  			wheelGradient.render();
		  	}}, 60);
		}

		function doMouseDown(event){
			var canvasX = 0;
			var canvasY = 0;
			var totalOffsetX = 0;
			var totalOffsetY = 0;
			var currentElement = this;
			
			do{
				totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;
				totalOffsetY += currentElement.offsetTop - currentElement.scrollTop;
			}while(currentElement = currentElement.offsetParent)
			canvasX = event.pageX - totalOffsetX;
    		canvasY = event.pageY - totalOffsetY;
    		var center = {x:canvasX,y:canvasY};
    		if(canvas.getContext){
	    		var wheelGradient = new WheelGradient(ctx, center);
	    		drawWDthellGradient(wheelGradient,center);
	    	}
		}

	</script>
</body>
</html>